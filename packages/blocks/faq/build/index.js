(()=>{"use strict";const e=window.wp.data,t={schema:null,faqItems:[]},s=(0,e.createReduxStore)("starboard/faq-store",{reducer(e=t,s){switch(s.type){case"ADD_OR_UPDATE_FAQ_ITEM":return{...e,faqItems:[...e.faqItems.filter((e=>e.id!==s.id)),{id:s.id,...s.data}]};case"REMOVE_FAQ_ITEM":return{...e,faqItems:e.faqItems.filter((e=>e.id!==s.id))};default:return e}},actions:{addOrUpdateFaqItem:(e,t)=>({type:"ADD_OR_UPDATE_FAQ_ITEM",id:e,data:t}),removeFaqItem:e=>({type:"REMOVE_FAQ_ITEM",id:e})},selectors:{getFaqItems:e=>e.faqItems},resolvers:{}});(0,e.register)(s);const r=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"starboard/faq","title":"FAQ","description":"FAQ wrapper","icon":"excerpt-view","category":"common","keywords":["faq","toggle","details"],"supports":{"anchor":true,"html":false,"color":{"text":false,"background":false}},"editorScript":"file:./build/index.js","attributes":{"title":{"type":"string","default":""},"schema":{"type":"object","default":{"@context":"https://schema.org","@type":"FAQPage","mainEntity":[]}}}}'),a=window.wp.blocks,i=window.wp.components,n=window.wp.element,o=window.wp.blockEditor,c=window.ReactJSXRuntime;function d(e){const{schema:t}=e;return t?(0,c.jsxs)("div",{className:"schema-preview",children:[(0,c.jsx)("h3",{children:"Schema Preview"}),(0,c.jsx)("div",{style:{overflow:"auto",border:"1px solid",borderRadius:"0.5rem 0.5rem 0 0",paddingLeft:"1rem",paddingRight:"1rem"},children:(0,c.jsx)("pre",{style:{width:"100%",marginBottom:"1rem",paddingTop:"1rem",paddingBottom:"1rem",marginTop:0},children:JSON.stringify(t,null,2)})})]}):null}function l(e){const{schema:t}=e;return t&&(0,c.jsx)("script",{type:"application/ld+json",children:JSON.stringify(t)})}(0,a.registerBlockType)(r,{edit:t=>{const{attributes:{schema:s},setAttributes:r}=t,a=(0,o.useBlockProps)(),l=(0,o.useInnerBlocksProps)({},{template:[["starboard/faq-item"],["starboard/faq-item"],["starboard/faq-item"]],allowedBlocks:["starboard/faq-item"]}),m=(0,e.useSelect)((e=>e("starboard/faq-store").getFaqItems()));return(0,n.useEffect)((()=>{if(m){const e=m.map((({title:e="",content:t=""})=>e.length>0&&t.length>0?{"@type":"Question",name:e,acceptedAnswer:{"@type":"Answer",text:t}}:null)).filter(Boolean);r({schema:{"@context":"https://schema.org","@type":"FAQPage",mainEntity:e}})}}),[m]),(0,c.jsxs)("div",{...a,children:[(0,c.jsx)(o.InspectorControls,{children:(0,c.jsx)(i.Panel,{children:(0,c.jsx)(i.PanelBody,{title:"Schema",defaultOpen:!1,children:(0,c.jsx)(d,{schema:s})})})}),(0,c.jsx)("div",{...l})]})},save:e=>{const{schema:t}=e.attributes,s=o.useInnerBlocksProps.save({className:"faqs-wrapper"});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{...s}),(0,c.jsx)(l,{schema:t})]})}})})();